# Переиспользуемый код: требования

## Когда выносить код в отдельный пакет

Вынос обязателен, если одновременно выполняются условия:

- поведение нужно минимум в двух сценариях/командах;
- требуется единый стандарт (таймауты, ретраи, логирование, error mapping);
- дублирование уже появилось или неизбежно.

## Когда не выносить

- логика специфична для одного use-case;
- API еще нестабильный и быстро меняется;
- абстракция только усложняет чтение сценария.

## Требования к reusable-пакетам

- Четкая зона ответственности.
- Минимальный публичный API.
- Явные правила ошибок и таймаутов.
- Тестируемость без реальных внешних систем.
- Документированный контракт использования.

## Анти-паттерны

- "god-util" с разнородными функциями.
- Пакет, который одновременно знает про CLI parsing и инфраструктурные детали.
- Абстракция ради абстракции без снижения связности.
